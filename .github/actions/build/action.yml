name: "Build"
description: "Build ASP.NET Core"
inputs:
  configuration:
    description: "Configuration"
    required: false
    default: "Debug"
  build-args:
    description: "Build arguments"
    required: false
    default:
      -ci
      --pack
      --all
      --no-build-java
      -p:OnlyPackPlatformSpecificPackages=true
      -bl:artifacts/log/build.macos.binlog
      -p:AssetManifestFileName=aspnetcore-MacOS_x64.xml

runs:
  using: "composite"
  steps:
    - run: echo "${PWD}/.dotnet/tools" >> $GITHUB_PATH
      shell: bash
    - run: |
        ./build.sh -configuration ${{ inputs.configuration }} ${{ inputs.build-args }}
      shell: bash
